{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import FlatList from\"react-native-web/dist/exports/FlatList\";import Text from\"react-native-web/dist/exports/Text\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import{Searchbar,Button}from'react-native-paper';import{Feather}from'@expo/vector-icons';import useEvent from\"../../hooks/useEvent\";import EventSelector from\"../../components/EventSelector\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var EventSelectionScreen=function EventSelectionScreen(_ref){var navigation=_ref.navigation;var _useEvent=useEvent(),events=_useEvent.events,loadEvents=_useEvent.loadEvents,selectEvent=_useEvent.selectEvent,isLoading=_useEvent.isLoading;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredEvents=_useState4[0],setFilteredEvents=_useState4[1];useEffect(function(){loadEvents();},[]);useEffect(function(){if(events){filterEvents();}},[events,searchQuery]);var filterEvents=function filterEvents(){if(!searchQuery.trim()){setFilteredEvents(events);}else{var filtered=events.filter(function(event){return event.name.toLowerCase().includes(searchQuery.toLowerCase());});setFilteredEvents(filtered);}};var handleSelectEvent=function(){var _ref2=_asyncToGenerator(function*(event){if(!event.isActive){return;}yield selectEvent(event);navigation.navigate('GateSelection');});return function handleSelectEvent(_x){return _ref2.apply(this,arguments);};}();if(isLoading){return _jsxs(View,{style:styles.centerContainer,children:[_jsx(ActivityIndicator,{size:\"large\",color:\"#2c3e50\"}),_jsx(Text,{style:styles.loadingText,children:\"Loading events...\"})]});}return _jsxs(View,{style:styles.container,children:[_jsxs(View,{style:styles.header,children:[_jsx(Text,{style:styles.headerTitle,children:\"Select an Event\"}),_jsx(Text,{style:styles.headerSubtitle,children:\"Choose an active event to scan tickets for\"})]}),_jsx(Searchbar,{placeholder:\"Search events...\",onChangeText:setSearchQuery,value:searchQuery,style:styles.searchBar}),events.length===0?_jsxs(View,{style:styles.centerContainer,children:[_jsx(Feather,{name:\"calendar\",size:50,color:\"#95a5a6\"}),_jsx(Text,{style:styles.emptyText,children:\"No events available\"}),_jsx(Text,{style:styles.emptySubText,children:\"Please contact an administrator to create events\"})]}):filteredEvents.length===0?_jsxs(View,{style:styles.centerContainer,children:[_jsx(Feather,{name:\"search\",size:50,color:\"#95a5a6\"}),_jsx(Text,{style:styles.emptyText,children:\"No events match your search\"}),_jsx(Button,{onPress:function onPress(){return setSearchQuery('');},mode:\"outlined\",style:styles.clearButton,children:\"Clear Search\"})]}):_jsx(FlatList,{data:filteredEvents,keyExtractor:function keyExtractor(item){return item.id.toString();},renderItem:function renderItem(_ref3){var item=_ref3.item;return _jsx(EventSelector,{event:item,onSelect:handleSelectEvent});},contentContainerStyle:styles.list})]});};var styles=StyleSheet.create({container:{flex:1,backgroundColor:'#f8f9fa'},header:{padding:16,backgroundColor:'#2c3e50'},headerTitle:{fontSize:20,fontWeight:'bold',color:'white'},headerSubtitle:{fontSize:14,color:'#ecf0f1',marginTop:4},searchBar:{margin:16,backgroundColor:'white'},list:{padding:16},centerContainer:{flex:1,justifyContent:'center',alignItems:'center',padding:20},emptyText:{fontSize:18,color:'#7f8c8d',marginVertical:10,textAlign:'center'},emptySubText:{fontSize:14,color:'#95a5a6',textAlign:'center'},loadingText:{marginTop:10,color:'#7f8c8d'},clearButton:{marginTop:20,borderColor:'#2c3e50'}});export default EventSelectionScreen;","map":{"version":3,"names":["React","useState","useEffect","View","StyleSheet","FlatList","Text","ActivityIndicator","Searchbar","Button","Feather","useEvent","EventSelector","jsx","_jsx","jsxs","_jsxs","EventSelectionScreen","_ref","navigation","_useEvent","events","loadEvents","selectEvent","isLoading","_useState","_useState2","_slicedToArray","searchQuery","setSearchQuery","_useState3","_useState4","filteredEvents","setFilteredEvents","filterEvents","trim","filtered","filter","event","name","toLowerCase","includes","handleSelectEvent","_ref2","_asyncToGenerator","isActive","navigate","_x","apply","arguments","style","styles","centerContainer","children","size","color","loadingText","container","header","headerTitle","headerSubtitle","placeholder","onChangeText","value","searchBar","length","emptyText","emptySubText","onPress","mode","clearButton","data","keyExtractor","item","id","toString","renderItem","_ref3","onSelect","contentContainerStyle","list","create","flex","backgroundColor","padding","fontSize","fontWeight","marginTop","margin","justifyContent","alignItems","marginVertical","textAlign","borderColor"],"sources":["/home/runner/workspace/src/screens/staff/EventSelectionScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  StyleSheet, \n  FlatList, \n  Text, \n  ActivityIndicator \n} from 'react-native';\nimport { Searchbar, Button } from 'react-native-paper';\nimport { Feather } from '@expo/vector-icons';\nimport useEvent from '../../hooks/useEvent';\nimport EventSelector from '../../components/EventSelector';\n\nconst EventSelectionScreen = ({ navigation }) => {\n  const { events, loadEvents, selectEvent, isLoading } = useEvent();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filteredEvents, setFilteredEvents] = useState([]);\n\n  useEffect(() => {\n    loadEvents();\n  }, []);\n\n  useEffect(() => {\n    if (events) {\n      filterEvents();\n    }\n  }, [events, searchQuery]);\n\n  const filterEvents = () => {\n    if (!searchQuery.trim()) {\n      setFilteredEvents(events);\n    } else {\n      const filtered = events.filter(event => \n        event.name.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n      setFilteredEvents(filtered);\n    }\n  };\n\n  const handleSelectEvent = async (event) => {\n    if (!event.isActive) {\n      return; // Don't allow selection of inactive events\n    }\n\n    await selectEvent(event);\n    // Navigate to gate selection screen\n    navigation.navigate('GateSelection');\n  };\n\n  if (isLoading) {\n    return (\n      <View style={styles.centerContainer}>\n        <ActivityIndicator size=\"large\" color=\"#2c3e50\" />\n        <Text style={styles.loadingText}>Loading events...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Select an Event</Text>\n        <Text style={styles.headerSubtitle}>Choose an active event to scan tickets for</Text>\n      </View>\n\n      <Searchbar\n        placeholder=\"Search events...\"\n        onChangeText={setSearchQuery}\n        value={searchQuery}\n        style={styles.searchBar}\n      />\n\n      {events.length === 0 ? (\n        <View style={styles.centerContainer}>\n          <Feather name=\"calendar\" size={50} color=\"#95a5a6\" />\n          <Text style={styles.emptyText}>No events available</Text>\n          <Text style={styles.emptySubText}>\n            Please contact an administrator to create events\n          </Text>\n        </View>\n      ) : filteredEvents.length === 0 ? (\n        <View style={styles.centerContainer}>\n          <Feather name=\"search\" size={50} color=\"#95a5a6\" />\n          <Text style={styles.emptyText}>No events match your search</Text>\n          <Button onPress={() => setSearchQuery('')} mode=\"outlined\" style={styles.clearButton}>\n            Clear Search\n          </Button>\n        </View>\n      ) : (\n        <FlatList\n          data={filteredEvents}\n          keyExtractor={(item) => item.id.toString()}\n          renderItem={({ item }) => (\n            <EventSelector \n              event={item} \n              onSelect={handleSelectEvent} \n            />\n          )}\n          contentContainerStyle={styles.list}\n        />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  header: {\n    padding: 16,\n    backgroundColor: '#2c3e50',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: 'white',\n  },\n  headerSubtitle: {\n    fontSize: 14,\n    color: '#ecf0f1',\n    marginTop: 4,\n  },\n  searchBar: {\n    margin: 16,\n    backgroundColor: 'white',\n  },\n  list: {\n    padding: 16,\n  },\n  centerContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyText: {\n    fontSize: 18,\n    color: '#7f8c8d',\n    marginVertical: 10,\n    textAlign: 'center',\n  },\n  emptySubText: {\n    fontSize: 14,\n    color: '#95a5a6',\n    textAlign: 'center',\n  },\n  loadingText: {\n    marginTop: 10,\n    color: '#7f8c8d',\n  },\n  clearButton: {\n    marginTop: 20,\n    borderColor: '#2c3e50',\n  }\n});\n\nexport default EventSelectionScreen;\n"],"mappings":"wIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,IAAA,iDAAAC,UAAA,uDAAAC,QAAA,qDAAAC,IAAA,iDAAAC,iBAAA,uDAQnD,OAASC,SAAS,CAAEC,MAAM,KAAQ,oBAAoB,CACtD,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,MAAO,CAAAC,QAAQ,4BACf,MAAO,CAAAC,aAAa,sCAAuC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3D,GAAM,CAAAC,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAAC,IAAA,CAAuB,IAAjB,CAAAC,UAAU,CAAAD,IAAA,CAAVC,UAAU,CACxC,IAAAC,SAAA,CAAuDT,QAAQ,CAAC,CAAC,CAAzDU,MAAM,CAAAD,SAAA,CAANC,MAAM,CAAEC,UAAU,CAAAF,SAAA,CAAVE,UAAU,CAAEC,WAAW,CAAAH,SAAA,CAAXG,WAAW,CAAEC,SAAS,CAAAJ,SAAA,CAATI,SAAS,CAClD,IAAAC,SAAA,CAAsCxB,QAAQ,CAAC,EAAE,CAAC,CAAAyB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA3CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAClC,IAAAI,UAAA,CAA4C7B,QAAQ,CAAC,EAAE,CAAC,CAAA8B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAjDE,cAAc,CAAAD,UAAA,IAAEE,iBAAiB,CAAAF,UAAA,IAExC7B,SAAS,CAAC,UAAM,CACdoB,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAENpB,SAAS,CAAC,UAAM,CACd,GAAImB,MAAM,CAAE,CACVa,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAAE,CAACb,MAAM,CAAEO,WAAW,CAAC,CAAC,CAEzB,GAAM,CAAAM,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB,GAAI,CAACN,WAAW,CAACO,IAAI,CAAC,CAAC,CAAE,CACvBF,iBAAiB,CAACZ,MAAM,CAAC,CAC3B,CAAC,IAAM,CACL,GAAM,CAAAe,QAAQ,CAAGf,MAAM,CAACgB,MAAM,CAAC,SAAAC,KAAK,QAClC,CAAAA,KAAK,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACb,WAAW,CAACY,WAAW,CAAC,CAAC,CAAC,EAC9D,CAAC,CACDP,iBAAiB,CAACG,QAAQ,CAAC,CAC7B,CACF,CAAC,CAED,GAAM,CAAAM,iBAAiB,gBAAAC,KAAA,CAAAC,iBAAA,CAAG,UAAON,KAAK,CAAK,CACzC,GAAI,CAACA,KAAK,CAACO,QAAQ,CAAE,CACnB,OACF,CAEA,KAAM,CAAAtB,WAAW,CAACe,KAAK,CAAC,CAExBnB,UAAU,CAAC2B,QAAQ,CAAC,eAAe,CAAC,CACtC,CAAC,iBARK,CAAAJ,iBAAiBA,CAAAK,EAAA,SAAAJ,KAAA,CAAAK,KAAA,MAAAC,SAAA,OAQtB,CAED,GAAIzB,SAAS,CAAE,CACb,MACE,CAAAR,KAAA,CAACb,IAAI,EAAC+C,KAAK,CAAEC,MAAM,CAACC,eAAgB,CAAAC,QAAA,EAClCvC,IAAA,CAACP,iBAAiB,EAAC+C,IAAI,CAAC,OAAO,CAACC,KAAK,CAAC,SAAS,CAAE,CAAC,CAClDzC,IAAA,CAACR,IAAI,EAAC4C,KAAK,CAAEC,MAAM,CAACK,WAAY,CAAAH,QAAA,CAAC,mBAAiB,CAAM,CAAC,EACrD,CAAC,CAEX,CAEA,MACE,CAAArC,KAAA,CAACb,IAAI,EAAC+C,KAAK,CAAEC,MAAM,CAACM,SAAU,CAAAJ,QAAA,EAC5BrC,KAAA,CAACb,IAAI,EAAC+C,KAAK,CAAEC,MAAM,CAACO,MAAO,CAAAL,QAAA,EACzBvC,IAAA,CAACR,IAAI,EAAC4C,KAAK,CAAEC,MAAM,CAACQ,WAAY,CAAAN,QAAA,CAAC,iBAAe,CAAM,CAAC,CACvDvC,IAAA,CAACR,IAAI,EAAC4C,KAAK,CAAEC,MAAM,CAACS,cAAe,CAAAP,QAAA,CAAC,4CAA0C,CAAM,CAAC,EACjF,CAAC,CAEPvC,IAAA,CAACN,SAAS,EACRqD,WAAW,CAAC,kBAAkB,CAC9BC,YAAY,CAAEjC,cAAe,CAC7BkC,KAAK,CAAEnC,WAAY,CACnBsB,KAAK,CAAEC,MAAM,CAACa,SAAU,CACzB,CAAC,CAED3C,MAAM,CAAC4C,MAAM,GAAK,CAAC,CAClBjD,KAAA,CAACb,IAAI,EAAC+C,KAAK,CAAEC,MAAM,CAACC,eAAgB,CAAAC,QAAA,EAClCvC,IAAA,CAACJ,OAAO,EAAC6B,IAAI,CAAC,UAAU,CAACe,IAAI,CAAE,EAAG,CAACC,KAAK,CAAC,SAAS,CAAE,CAAC,CACrDzC,IAAA,CAACR,IAAI,EAAC4C,KAAK,CAAEC,MAAM,CAACe,SAAU,CAAAb,QAAA,CAAC,qBAAmB,CAAM,CAAC,CACzDvC,IAAA,CAACR,IAAI,EAAC4C,KAAK,CAAEC,MAAM,CAACgB,YAAa,CAAAd,QAAA,CAAC,kDAElC,CAAM,CAAC,EACH,CAAC,CACLrB,cAAc,CAACiC,MAAM,GAAK,CAAC,CAC7BjD,KAAA,CAACb,IAAI,EAAC+C,KAAK,CAAEC,MAAM,CAACC,eAAgB,CAAAC,QAAA,EAClCvC,IAAA,CAACJ,OAAO,EAAC6B,IAAI,CAAC,QAAQ,CAACe,IAAI,CAAE,EAAG,CAACC,KAAK,CAAC,SAAS,CAAE,CAAC,CACnDzC,IAAA,CAACR,IAAI,EAAC4C,KAAK,CAAEC,MAAM,CAACe,SAAU,CAAAb,QAAA,CAAC,6BAA2B,CAAM,CAAC,CACjEvC,IAAA,CAACL,MAAM,EAAC2D,OAAO,CAAE,QAAT,CAAAA,OAAOA,CAAA,QAAQ,CAAAvC,cAAc,CAAC,EAAE,CAAC,EAAC,CAACwC,IAAI,CAAC,UAAU,CAACnB,KAAK,CAAEC,MAAM,CAACmB,WAAY,CAAAjB,QAAA,CAAC,cAEtF,CAAQ,CAAC,EACL,CAAC,CAEPvC,IAAA,CAACT,QAAQ,EACPkE,IAAI,CAAEvC,cAAe,CACrBwC,YAAY,CAAE,QAAd,CAAAA,YAAYA,CAAGC,IAAI,QAAK,CAAAA,IAAI,CAACC,EAAE,CAACC,QAAQ,CAAC,CAAC,EAAC,CAC3CC,UAAU,CAAE,QAAZ,CAAAA,UAAUA,CAAAC,KAAA,KAAK,CAAAJ,IAAI,CAAAI,KAAA,CAAJJ,IAAI,OACjB,CAAA3D,IAAA,CAACF,aAAa,EACZ0B,KAAK,CAAEmC,IAAK,CACZK,QAAQ,CAAEpC,iBAAkB,CAC7B,CAAC,EACF,CACFqC,qBAAqB,CAAE5B,MAAM,CAAC6B,IAAK,CACpC,CACF,EACG,CAAC,CAEX,CAAC,CAED,GAAM,CAAA7B,MAAM,CAAG/C,UAAU,CAAC6E,MAAM,CAAC,CAC/BxB,SAAS,CAAE,CACTyB,IAAI,CAAE,CAAC,CACPC,eAAe,CAAE,SACnB,CAAC,CACDzB,MAAM,CAAE,CACN0B,OAAO,CAAE,EAAE,CACXD,eAAe,CAAE,SACnB,CAAC,CACDxB,WAAW,CAAE,CACX0B,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,MAAM,CAClB/B,KAAK,CAAE,OACT,CAAC,CACDK,cAAc,CAAE,CACdyB,QAAQ,CAAE,EAAE,CACZ9B,KAAK,CAAE,SAAS,CAChBgC,SAAS,CAAE,CACb,CAAC,CACDvB,SAAS,CAAE,CACTwB,MAAM,CAAE,EAAE,CACVL,eAAe,CAAE,OACnB,CAAC,CACDH,IAAI,CAAE,CACJI,OAAO,CAAE,EACX,CAAC,CACDhC,eAAe,CAAE,CACf8B,IAAI,CAAE,CAAC,CACPO,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QAAQ,CACpBN,OAAO,CAAE,EACX,CAAC,CACDlB,SAAS,CAAE,CACTmB,QAAQ,CAAE,EAAE,CACZ9B,KAAK,CAAE,SAAS,CAChBoC,cAAc,CAAE,EAAE,CAClBC,SAAS,CAAE,QACb,CAAC,CACDzB,YAAY,CAAE,CACZkB,QAAQ,CAAE,EAAE,CACZ9B,KAAK,CAAE,SAAS,CAChBqC,SAAS,CAAE,QACb,CAAC,CACDpC,WAAW,CAAE,CACX+B,SAAS,CAAE,EAAE,CACbhC,KAAK,CAAE,SACT,CAAC,CACDe,WAAW,CAAE,CACXiB,SAAS,CAAE,EAAE,CACbM,WAAW,CAAE,SACf,CACF,CAAC,CAAC,CAEF,cAAe,CAAA5E,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}