{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import React,{useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{Surface,Badge,IconButton}from'react-native-paper';import{Feather}from'@expo/vector-icons';import useScan from\"../hooks/useScan\";import useOfflineSync from\"../hooks/useOfflineSync\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var SyncStatus=function SyncStatus(){var _useScan=useScan(),offlineCheckIns=_useScan.offlineCheckIns,isOnline=_useScan.isOnline;var _useOfflineSync=useOfflineSync(false),triggerSync=_useOfflineSync.triggerSync,isSyncing=_useOfflineSync.isSyncing,syncStatus=_useOfflineSync.syncStatus;var handleManualSync=function(){var _ref=_asyncToGenerator(function*(){if(isOnline&&!isSyncing&&offlineCheckIns.length>0){yield triggerSync();}});return function handleManualSync(){return _ref.apply(this,arguments);};}();if(offlineCheckIns.length===0){return null;}return _jsxs(Surface,{style:styles.container,children:[_jsxs(View,{style:styles.infoContainer,children:[_jsx(Feather,{name:\"database\",size:20,color:isOnline?\"#3498db\":\"#7f8c8d\"}),_jsxs(Text,{style:styles.text,children:[offlineCheckIns.length,\" \",offlineCheckIns.length===1?'check-in':'check-ins',\" pending sync\"]})]}),_jsxs(TouchableOpacity,{onPress:handleManualSync,disabled:!isOnline||isSyncing,style:[styles.syncButton,(!isOnline||isSyncing)&&styles.disabledSyncButton],children:[isSyncing?_jsx(Text,{style:styles.syncButtonText,children:\"Syncing...\"}):_jsx(Text,{style:styles.syncButtonText,children:\"Sync Now\"}),_jsx(Feather,{name:isSyncing?\"loader\":\"upload-cloud\",size:16,color:\"#fff\",style:[styles.syncIcon,isSyncing&&styles.spinningIcon]})]})]});};var styles=StyleSheet.create({container:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',padding:10,backgroundColor:'#f8f9fa',borderBottomWidth:1,borderBottomColor:'#ecf0f1'},infoContainer:{flexDirection:'row',alignItems:'center'},text:{marginLeft:8,fontSize:14,color:'#2c3e50'},syncButton:{flexDirection:'row',alignItems:'center',backgroundColor:'#3498db',paddingHorizontal:12,paddingVertical:6,borderRadius:4},disabledSyncButton:{backgroundColor:'#bdc3c7'},syncButtonText:{color:'white',fontSize:12,marginRight:4},syncIcon:{marginLeft:4},spinningIcon:{}});export default SyncStatus;","map":{"version":3,"names":["React","useEffect","View","StyleSheet","Text","TouchableOpacity","Surface","Badge","IconButton","Feather","useScan","useOfflineSync","jsx","_jsx","jsxs","_jsxs","SyncStatus","_useScan","offlineCheckIns","isOnline","_useOfflineSync","triggerSync","isSyncing","syncStatus","handleManualSync","_ref","_asyncToGenerator","length","apply","arguments","style","styles","container","children","infoContainer","name","size","color","text","onPress","disabled","syncButton","disabledSyncButton","syncButtonText","syncIcon","spinningIcon","create","flexDirection","justifyContent","alignItems","padding","backgroundColor","borderBottomWidth","borderBottomColor","marginLeft","fontSize","paddingHorizontal","paddingVertical","borderRadius","marginRight"],"sources":["/home/runner/workspace/src/components/SyncStatus.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { View, StyleSheet, Text, TouchableOpacity } from 'react-native';\nimport { Surface, Badge, IconButton } from 'react-native-paper';\nimport { Feather } from '@expo/vector-icons';\nimport useScan from '../hooks/useScan';\nimport useOfflineSync from '../hooks/useOfflineSync';\n\nconst SyncStatus = () => {\n  const { offlineCheckIns, isOnline } = useScan();\n  const { triggerSync, isSyncing, syncStatus } = useOfflineSync(false);\n\n  const handleManualSync = async () => {\n    if (isOnline && !isSyncing && offlineCheckIns.length > 0) {\n      await triggerSync();\n    }\n  };\n\n  // Don't show anything if no offline check-ins\n  if (offlineCheckIns.length === 0) {\n    return null;\n  }\n\n  return (\n    <Surface style={styles.container}>\n      <View style={styles.infoContainer}>\n        <Feather \n          name=\"database\" \n          size={20} \n          color={isOnline ? \"#3498db\" : \"#7f8c8d\"} \n        />\n        <Text style={styles.text}>\n          {offlineCheckIns.length} {offlineCheckIns.length === 1 ? 'check-in' : 'check-ins'} pending sync\n        </Text>\n      </View>\n      <TouchableOpacity \n        onPress={handleManualSync}\n        disabled={!isOnline || isSyncing}\n        style={[\n          styles.syncButton,\n          (!isOnline || isSyncing) && styles.disabledSyncButton\n        ]}\n      >\n        {isSyncing ? (\n          <Text style={styles.syncButtonText}>Syncing...</Text>\n        ) : (\n          <Text style={styles.syncButtonText}>Sync Now</Text>\n        )}\n        <Feather \n          name={isSyncing ? \"loader\" : \"upload-cloud\"} \n          size={16} \n          color=\"#fff\" \n          style={[\n            styles.syncIcon,\n            isSyncing && styles.spinningIcon\n          ]} \n        />\n      </TouchableOpacity>\n    </Surface>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 10,\n    backgroundColor: '#f8f9fa',\n    borderBottomWidth: 1,\n    borderBottomColor: '#ecf0f1',\n  },\n  infoContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  text: {\n    marginLeft: 8,\n    fontSize: 14,\n    color: '#2c3e50',\n  },\n  syncButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#3498db',\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 4,\n  },\n  disabledSyncButton: {\n    backgroundColor: '#bdc3c7',\n  },\n  syncButtonText: {\n    color: 'white',\n    fontSize: 12,\n    marginRight: 4,\n  },\n  syncIcon: {\n    marginLeft: 4,\n  },\n  spinningIcon: {\n    // Note: In a real app, you would use an animation here\n  },\n});\n\nexport default SyncStatus;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}